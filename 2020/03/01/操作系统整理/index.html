<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="OS," />





  <link rel="alternate" href="/atom.xml" title="Zzh的博客 | Alvin103" type="application/atom+xml" />






<meta name="description" content="复习操作系统，学习总结，一点点整理。">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统整理">
<meta property="og:url" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="Zzh的博客 | Alvin103">
<meta property="og:description" content="复习操作系统，学习总结，一点点整理。">
<meta property="og:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/1.JPG">
<meta property="og:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/2.JPG">
<meta property="og:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/3.JPG">
<meta property="og:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/4.JPG">
<meta property="og:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/5.JPG">
<meta property="og:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/6.JPG">
<meta property="article:published_time" content="2020-03-01T15:45:54.000Z">
<meta property="article:modified_time" content="2020-03-14T10:57:55.056Z">
<meta property="article:author" content="郑子豪">
<meta property="article:tag" content="OS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/1.JPG">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://alvin103.github.io/2020/03/01/操作系统整理/"/>





  <title>操作系统整理 | Zzh的博客 | Alvin103</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?016e37d7b6a1d09e58727fe5439a3149";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zzh的博客 | Alvin103</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Hello world, heal the world.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://alvin103.github.io/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="郑子豪">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/author.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zzh的博客 | Alvin103">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">操作系统整理</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-01T23:45:54+08:00">
                2020-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>复习操作系统，学习总结，一点点整理。</p>
<a id="more"></a>

<!-- TOC -->

<ul>
<li><a href="#操作系统operating-system概述">操作系统（Operating System）概述</a><ul>
<li><a href="#操作系统的功能和目标">操作系统的功能和目标</a></li>
<li><a href="#操作系统的特征">操作系统的特征</a></li>
<li><a href="#操作系统的发展与分类">操作系统的发展与分类</a></li>
<li><a href="#操作系统的运行机制和体系结构">操作系统的运行机制和体系结构</a></li>
<li><a href="#中断和异常">中断和异常</a></li>
<li><a href="#系统调用">系统调用</a></li>
</ul>
</li>
<li><a href="#进程管理">进程管理</a><ul>
<li><a href="#进程">进程</a></li>
<li><a href="#线程">线程</a></li>
<li><a href="#处理机调度">处理机调度</a></li>
<li><a href="#进程调度和调度算法">进程调度和调度算法</a></li>
<li><a href="#进程同步--互斥">进程同步 / 互斥</a></li>
<li><a href="#死锁">死锁</a></li>
</ul>
</li>
<li><a href="#内存管理">内存管理</a><ul>
<li><a href="#概念">概念</a></li>
<li><a href="#内存空间的分配与回收">内存空间的分配与回收</a></li>
<li><a href="#内存空间的扩充">内存空间的扩充</a></li>
<li><a href="#请求分页存储管理">请求分页存储管理</a></li>
<li><a href="#页面分配策略">页面分配策略</a></li>
</ul>
</li>
<li><a href="#文件管理">文件管理</a><ul>
<li><a href="#文件的逻辑结构">文件的逻辑结构</a></li>
<li><a href="#文件目录">文件目录</a></li>
<li><a href="#文件的物理结构">文件的物理结构</a></li>
<li><a href="#文件存储空间管理">文件存储空间管理</a></li>
<li><a href="#文件基本操作">文件基本操作</a></li>
<li><a href="#磁盘">磁盘</a></li>
</ul>
</li>
<li><a href="#设备管理">设备管理</a><ul>
<li><a href="#io设备">I/O设备</a></li>
<li><a href="#io控制方式">I/O控制方式</a></li>
<li><a href="#io软件层次">I/O软件层次</a></li>
<li><a href="#假脱机技术">假脱机技术</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<hr>
<h2 id="操作系统（Operating-System）概述"><a href="#操作系统（Operating-System）概述" class="headerlink" title="操作系统（Operating System）概述"></a>操作系统（Operating System）概述</h2><p>控制和管理计算机的硬件和软件，并合理调度计算机工作和资源分配，提供给用户和其他软件接口和环境，是计算机系统中最基本的系统软件</p>
<h3 id="操作系统的功能和目标"><a href="#操作系统的功能和目标" class="headerlink" title="操作系统的功能和目标"></a>操作系统的功能和目标</h3><table>
<thead>
<tr>
<th>Operating System</th>
<th>功能</th>
<th>目标</th>
</tr>
</thead>
<tbody><tr>
<td>系统资源的管理者</td>
<td>文件管理<br> 存储器管理（内存）<br>处理机管理（CPU） <br>设备管理</td>
<td>安全、高效</td>
</tr>
<tr>
<td>用户和硬件之间的接口</td>
<td>命令接口（联机 脱机）<br> 程序接口 （系统调用）<br>GUI -图形用户界面</td>
<td>方便用户使用</td>
</tr>
<tr>
<td>最接近硬件的层次</td>
<td><center> 对硬件机器的扩展</center></td>
<td></td>
</tr>
</tbody></table>
<h3 id="操作系统的特征"><a href="#操作系统的特征" class="headerlink" title="操作系统的特征"></a>操作系统的特征</h3><table>
<thead>
<tr>
<th align="center">特征</th>
<th>&emsp;</th>
</tr>
</thead>
<tbody><tr>
<td align="center">并发</td>
<td>并发：两个或多个事件同一时间间隔发生<br>并行：两个或多个事件同时发生</td>
</tr>
<tr>
<td align="center">共享</td>
<td>资源共享，系统中的资源可供内存中多个并发的进程共同使用 <br>1.互斥共享  2.同时共享</td>
</tr>
<tr>
<td align="center">虚拟</td>
<td>物理实体-&gt;逻辑对应物  <br> 空分复用技术（虚拟存储器） <br>时分复用技术（虚拟处理器）</td>
</tr>
<tr>
<td align="center">异步</td>
<td>走走停停~</td>
</tr>
</tbody></table>
<h3 id="操作系统的发展与分类"><a href="#操作系统的发展与分类" class="headerlink" title="操作系统的发展与分类"></a>操作系统的发展与分类</h3><p>手工-&gt;单道批处理-&gt;多道批处理-&gt;分时操作系统-&gt;实时操作系统（硬/软）<br>个人操作系统 网络操作系统 分布式操作系统</p>
<h3 id="操作系统的运行机制和体系结构"><a href="#操作系统的运行机制和体系结构" class="headerlink" title="操作系统的运行机制和体系结构"></a>操作系统的运行机制和体系结构</h3><table>
<thead>
<tr>
<th>&emsp;</th>
<th>&emsp;</th>
</tr>
</thead>
<tbody><tr>
<td>运行机制</td>
<td>特权指令 非特权指令<br>核心态&emsp;&ensp;用户态<br>内核程序 应用程序</td>
</tr>
<tr>
<td>内核</td>
<td>操作系统最基本、核心的部分<br>时钟管理  中断处理  原语<br>对系统资源进行管理<br>不同操作系统对内核功能划分不同</td>
</tr>
<tr>
<td>体系结构</td>
<td>大内核 高性能 内核代码庞大难维护<br>微内核 低性能 内核功能少方维护</td>
</tr>
</tbody></table>
<h3 id="中断和异常"><a href="#中断和异常" class="headerlink" title="中断和异常"></a>中断和异常</h3><table>
<thead>
<tr>
<th>中断和异常</th>
</tr>
</thead>
<tbody><tr>
<td>为实现多道程序并发执行</td>
</tr>
<tr>
<td>发生中断-&gt;立即进入核心态 操作系统介入管理</td>
</tr>
<tr>
<td>内中断 （异常、陷入、例外） （trap、fault、abort</td>
</tr>
<tr>
<td>外中断  与指令无关 I/O完成中断 人工干预</td>
</tr>
</tbody></table>
<h3 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h3><table>
<thead>
<tr>
<th>系统调用</th>
</tr>
</thead>
<tbody><tr>
<td>应用程序通过系统调用请求操作系统的服务，保证系统稳定性和安全性。</td>
</tr>
<tr>
<td>设备管理 文件管理 进程控制 进程通信 内存管理</td>
</tr>
<tr>
<td>传递系统调用参数-&gt;执行陷入指令（用户态）-&gt;<br>切换到核心态执行系统调用相应服务程序-&gt;返回用户程序</td>
</tr>
<tr>
<td>系统调用与库函数区别</td>
</tr>
</tbody></table>
<hr>
<h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2><h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><table>
<thead>
<tr>
<th>进程</th>
<th>&emsp;</th>
</tr>
</thead>
<tbody><tr>
<td>定义</td>
<td>进程实体的运行过程，资源分配的基本单位。</td>
</tr>
<tr>
<td>组成</td>
<td>程序段、数据段、进程控制块（PCB）组成了进程实体（映像）</td>
</tr>
<tr>
<td>组织</td>
<td>链接方式 索引方式</td>
</tr>
<tr>
<td>特征</td>
<td>动态性 并发性 独立性 异步性 结构性</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>五种状态</th>
<th>&emsp;</th>
</tr>
</thead>
<tbody><tr>
<td>运行态（Running）</td>
<td>占有CPU，并在CPU上运行</td>
</tr>
<tr>
<td>就绪态（Ready）</td>
<td>具备运行条件，由于没有空闲CPU，暂时不能运行</td>
</tr>
<tr>
<td>阻塞态（Waiting/Blocked）</td>
<td>等待某一事件而暂时不能运行</td>
</tr>
<tr>
<td>创建态（New）</td>
<td>分配资源，初始化PCB</td>
</tr>
<tr>
<td>终止态（Terminated）</td>
<td>回收资源，撤销PCB</td>
</tr>
</tbody></table>
<p><img src="/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/1.JPG" alt="1"></p>
<p>进程控制：实现进程状态转换<br>原语，采用“关中断指令”和“开中断指令”实现  </p>
<p>1.更新PCB中的信息（进程状态标志，运行环境保存/恢复）<br>&emsp;a.一定会修改状态标志<br>&emsp;b.剥夺当前进程CPU使用权必然需要保存运行环境<br>&emsp;c.进程开始运行前必然要恢复其运行环境<br>2.将PCB插入合适队列<br>3.分配/回收资源  </p>
<table>
<thead>
<tr>
<th>进程通信方式</th>
<th>&emsp;</th>
</tr>
</thead>
<tbody><tr>
<td>共享存储</td>
<td>设置共享空间，互斥访问</td>
</tr>
<tr>
<td>消息传递</td>
<td>直接 / 间接（消息先发到中间体-信箱）</td>
</tr>
<tr>
<td>管道通信</td>
<td>单管道半双工，写满了读，读空了写</td>
</tr>
</tbody></table>
<hr>
<h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><p>线程是独立调度的基本单位，一个进程中可以有多个线程，它们共享进程资源；各线程间也能并发，提升了并发度；引入线程后，并发所带来的系统开销小，因为同一进程内不需要切换进程环境。</p>
<p><img src="/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/2.JPG" alt="1"></p>
<p>线程的实现方式：用户级线程 内核级线程 组合方式</p>
<table>
<thead>
<tr>
<th>多线程模型</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td>多对一</td>
<td>进程管理开销小效率高</td>
<td>一阻全阻，并发性低</td>
</tr>
<tr>
<td>一对一</td>
<td>多核并行，并发度高</td>
<td>进程管理开销大</td>
</tr>
<tr>
<td>多对多</td>
<td>集前两者之所长</td>
<td></td>
</tr>
</tbody></table>
<hr>
<h3 id="处理机调度"><a href="#处理机调度" class="headerlink" title="处理机调度"></a>处理机调度</h3><table>
<thead>
<tr>
<th>三层调度</th>
<th>内容</th>
<th>发生在</th>
<th>频率</th>
<th>对进程状态的影响</th>
</tr>
</thead>
<tbody><tr>
<td>高级调度（作业调度）</td>
<td>按规则从后备队列选择作业调入内存创建进程</td>
<td>外存-&gt;内存<br>（面向作业）</td>
<td>低</td>
<td>无-&gt;创建态-&gt;就绪态</td>
</tr>
<tr>
<td>中级调度（内存调度）</td>
<td>按规则从挂起队列选择进程调回内存</td>
<td>外存-&gt;内存<br>（面向进程）</td>
<td>中</td>
<td>就绪挂起-&gt;就绪态 阻塞挂起-&gt;阻塞态</td>
</tr>
<tr>
<td>低级调度（进程调度）</td>
<td>按规则从就绪队列选择进程为其分配处理机</td>
<td>内存-&gt;CPU</td>
<td>高</td>
<td>就绪态-&gt;运行态</td>
</tr>
</tbody></table>
<p>挂起态：就绪挂起 阻塞挂起</p>
<h3 id="进程调度和调度算法"><a href="#进程调度和调度算法" class="headerlink" title="进程调度和调度算法"></a>进程调度和调度算法</h3><p>需要进行进程调度的情况：<br>&emsp;主动放弃处理机（进程正常/异常终止、主动请求阻塞如等待I/O）<br>&emsp;被动放弃处理机（时间片用完、更紧急的事如I/O中断、更高优先级的进程进入就绪队列）<br>不能进行进程调度的情况：<br>&emsp;1.处理中断的过程中&emsp;2.进程在操作系统内核程序临界区中&emsp;3.在原子操作过程中（原语）</p>
<p>进程调度方式：剥夺/非剥夺  </p>
<p>进程调度、切换有代价，并不是调度越频繁并发度越高。</p>
<p>调度算法评价指标：CPU利用率 系统吞吐量 周转时间（平均、带权、平均带权） 等待时间（进程、作业、平均） 响应时间</p>
<table>
<thead>
<tr>
<th>早起批处理系统 调度算法</th>
<th>抢占</th>
<th>特点</th>
<th>饥饿</th>
</tr>
</thead>
<tbody><tr>
<td>先来先服务算法<br>(FCFS, First Come First Serve0)</td>
<td>非抢占</td>
<td>公平简单，短作业不利，考虑等待时间</td>
<td>不会</td>
</tr>
<tr>
<td>短作业优先算法<br>（SJF, Shortest Job First）</td>
<td>抢占SRNT / 非抢占</td>
<td>长作业不利，考虑运行时间</td>
<td>会</td>
</tr>
<tr>
<td>高响应比优先算法<br>（HRRN, Highest Response Ratio Next）</td>
<td>非抢占</td>
<td>上述两种算法权衡折中<br>响应比 = （等待 + 要求服务）/ 要求服务</td>
<td>不会</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>交互式系统 调度算法</th>
<th>抢占</th>
<th>特点</th>
<th>饥饿</th>
</tr>
</thead>
<tbody><tr>
<td>时间片轮转算法（RR, Round-Robin）</td>
<td>抢占</td>
<td>适于分时操作系统，注重响应时间，不考虑紧急</td>
<td>不会</td>
</tr>
<tr>
<td>优先级调度算法</td>
<td>抢占/非抢占</td>
<td>适于实时操作系统，区分调整重要程度</td>
<td>会</td>
</tr>
<tr>
<td>多级反馈队列调度算法</td>
<td>抢占</td>
<td>平衡公平</td>
<td>会</td>
</tr>
</tbody></table>
<hr>
<h3 id="进程同步-互斥"><a href="#进程同步-互斥" class="headerlink" title="进程同步 / 互斥"></a>进程同步 / 互斥</h3><p>同步：多个进程因为合作产生的直接制约关系，使得进程有一定的先后执行关系。<br>互斥：多个进程在同一时刻只有一个进程能进入临界区。&emsp;进入区、临界区、退出去、剩余区。<br>互斥原则：1.空闲让进&emsp;2.忙则等待&emsp;3.有限等待&emsp;4.让权等待</p>
<table>
<thead>
<tr>
<th>进程互斥的软件实现方法</th>
<th>思想</th>
<th>主要问题</th>
</tr>
</thead>
<tbody><tr>
<td>单标志法</td>
<td>每个进程进入临界区的权限只能被另一个进程赋予</td>
<td>违背 空闲让进 原则</td>
</tr>
<tr>
<td>双标志先检查法</td>
<td>flag[]数组标记各进程想进入临界区的意愿<br>先“检查”后“上锁”</td>
<td>违背 忙则等待 原则</td>
</tr>
<tr>
<td>双标志后检查法</td>
<td>先“上锁” 后“检查”</td>
<td>违背了 空闲让进 和 有限等待 原则<br>产生饥饿</td>
</tr>
<tr>
<td>Peterson算法</td>
<td>谦让，主动让对方先使用临界区</td>
<td>未遵循 让权等待 原则，发生忙等</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>进程互斥的硬件实现方法</th>
<th>思想</th>
<th>主要问题</th>
</tr>
</thead>
<tbody><tr>
<td>中断屏蔽方法</td>
<td>开/关中断指令</td>
<td>不适用多处理机，只适用OS内核进程，不适用于用户进程</td>
</tr>
<tr>
<td>TestAndSet指令</td>
<td>硬件实现，执行过程不允被许中断</td>
<td>不满足 让权等待 原则，发生忙等</td>
</tr>
<tr>
<td>Swap指令</td>
<td>同上</td>
<td>同上</td>
</tr>
</tbody></table>
<p>信号量机制</p>
<p>1.双标志检查法中，“检查”和“上锁”无法一气呵成，导致了两个进程可能同时进入临界区。<br>2.所有解决方案无法实现 让权等待</p>
<p>Dijkstra 提出实现进程同步、互斥的方法——信号量机制，通过操作系统提供的一对原语对信号量进行操作。<br>信号量：表示系统中某种资源的数量。整型信号量&emsp;记录型信号量<br>一对原语：wait(S) 和 signal(s)&emsp;简称为P、V操作，遗漏P则不能保证互斥访问，遗漏V则不能在使用临界资源之后将其释放（给其他等待的进程）<br>实现进程互斥：临界区前P，临界区后V&emsp;实现进程同步：“前操作”后V，“后操作”前P  </p>
<p>优点：简单且表达能力强，用P.V操作可解决任何同步互斥问题<br>缺点：不够安全；P.V操作使用不当会出现死锁  </p>
<table>
<thead>
<tr>
<th>进程互斥同步问题</th>
<th>同步、互斥关系</th>
<th>P、V顺序</th>
</tr>
</thead>
<tbody><tr>
<td>生产者消费者问题</td>
<td>1.缓冲区没满生产者才能放产品<br>2.缓冲区不空消费者才能取产品<br>缓冲区是临界资源，需互斥访问</td>
<td>生产者消耗(P )一个缓冲区，并生产(V)一个产品<br>消费者消耗(P)一个产品，并释放(V)一个空闲缓冲区<br>临界区前P、临界区后V 实现互斥访问</td>
</tr>
<tr>
<td>多生产者多消费者问题</td>
<td>1.缓冲区为空才能放<br>2.生产者1放入产品1后，消费者1才能取产品2<br>3.生产者2放入产品2后，消费者2才能取产品2<br>缓冲区是临界资源，需互斥访问</td>
<td>生产者1/2消耗(P)一个缓冲区，生产(V)一个产品1/2<br>消费者1/2消耗(P)产品1/2，释放(V)一个空闲缓冲区<br>临界区前P、临界区后V 实现互斥访问</td>
</tr>
<tr>
<td>吸烟者问题</td>
<td>1.桌上有组合一，抽烟者1取走<br>2.桌上有组合二，抽烟者2取走<br>3.桌上有组合三，抽烟者3取走<br>4.发出完成信号，供应者将下一组合放桌上<br>缓冲区是临界资源，需互斥访问</td>
<td>供应者放入某组合后(V),然后(P)等待信号<br>吸烟者拿组合前(P),抽完烟(V)<br>临界区前P、临界区后V 实现互斥访问</td>
</tr>
<tr>
<td>读者写者问题</td>
<td>1.写完才能读<br>2.读者和其他写者退出后才能写<br>3.允许多个读者同时读<br>缓冲区是临界资源，需互斥访问</td>
<td>写之前加锁(P)写完解锁(V)<br>第一个读进程加锁(P)最后一个读进程解锁(V)<br>为解决饥饿，再在写者和第一个读者设置互斥信号量<br>各个读进程加P、V互斥访问</td>
</tr>
<tr>
<td>哲学家进餐问题</td>
<td>1.哲学家与左右邻居对中间筷子互斥访问<br>2.每个哲学家需同时持有两个临界资源<br>如何避免死锁</td>
<td>1.限制同时进餐的哲学家人数<br>2.要求奇/偶数号先拿左/右的筷子<br>3.仅当一个哲学家左右筷子都可使用才能拿起筷子</td>
</tr>
</tbody></table>
<p>信号量机制存在的问题：编写程序困难、易出错。<br>1973年，Brinch Hansen首次在Pascal中引入管程——高级同步机制，目的是更方便的实现进程互斥和同步</p>
<p>管程 是一种特殊软件模块：<br>1.局部与管程的共享数据结构说明<br>2.对该数据结构进行操作的一组过程<br>3.对局部与管程的共享数据设置初值的语句<br>4.管程有一个名字<br>特征：<br>1.局部与管程的数据只能被局部与管程的过程所访问<br>2.一个进程只有通过调用管程内的过程才能进入管程访问共享数据<br>3.每次仅允许一个进程在管程内执行某个内部过程</p>
<hr>
<h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><p>死锁：各进程 ( &gt;=2 ) 互相等待对方手里的资源，导致各进程都阻塞，无法向前推进的现象。<br>饥饿：由于长期得不到资源，某进程无法向前推进的现象。</p>
<p>产生死锁条件（缺一不可）<br>&emsp;互斥条件：只有对互斥使用的资源争抢才会导致死锁。<br>&emsp;不剥夺条件：进程所获得资源未使用完之前，不能由其他进程夺走，只能主动释放。<br>&emsp;请求和保持条件：进程已有一资源，请求另一资源，阻塞，又对自己的资源保持不放。<br>&emsp;循环等待条件：存在一种进程资源的循环等待链。  </p>
<p>发生死锁：1.对系统资源的竞争&emsp;2.进程推进顺序非法&emsp;3.信号量使用不当</p>
<p>预防死锁（破坏条件）<br>避免死锁（算法防止系统进入不安全状态，<a href="银行家算法.md">银行家算法</a>）<br>死锁的检测和解除（资源分配图，资源剥夺法、撤销进程法、进程回退法）  </p>
<hr>
<h2 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>逻辑地址（相对地址）&emsp;物理地址（绝对地址）</p>
<p><img src="/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/3.JPG" alt="1"></p>
<p>链接方式： 静态链接&emsp;装入时动态链接&emsp;运行时动态链接<br>装入方式： 绝对装入&emsp;可重定位装入&emsp;动态运行时装入  </p>
<p>内存管理概念：</p>
<ol>
<li>内存空间的分配与回收</li>
<li>内存空间的扩充（虚拟性）</li>
<li>地址转换（三种）</li>
<li>存储保护（上下限寄存器、重定位+界地址寄存器）</li>
</ol>
<hr>
<h3 id="内存空间的分配与回收"><a href="#内存空间的分配与回收" class="headerlink" title="内存空间的分配与回收"></a>内存空间的分配与回收</h3><table>
<thead>
<tr>
<th>连续分配管理方式</th>
<th>内容</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>单一连续分配</td>
<td>内存被分为系统区和用户区。</td>
<td>简单；无外部碎片，有内部碎片；<br>采用覆盖技术扩充内存；不一定需要内存保护（eg:MS-DOS）<br>只能用于单用户、单任务的OS；；存储器利用率低。</td>
</tr>
<tr>
<td>固定分区分配</td>
<td>将整个用户空间分为若干个分区，每个分区只装入一道作业</td>
<td>简单；无外部碎片，有内部碎片；<br>分区相等适于一控多，分区不等更灵活<br>用户程序太大，分区不能满足，只能用覆盖技术（降低性能）<br>内存利用率低</td>
</tr>
<tr>
<td>动态分区分配</td>
<td>进程装入内存时，根据大小动态建立分区<br>空闲分区表/空闲分区链记录内存使用情况<br>动态分区分配算法进行分配 回收<br></td>
<td>无内部碎片，有外部碎片；可通过紧凑技术解决外部碎片；<br>支持多道程序</td>
</tr>
</tbody></table>
<p>内部碎片：分配给进程的内存中没用上<br>外部碎片：内存中由于太小难以利用的分区</p>
<table>
<thead>
<tr>
<th>动态分区分配算法</th>
<th>算法思想</th>
<th>实现方法</th>
</tr>
</thead>
<tbody><tr>
<td>首次适应算法</td>
<td>从低地址开始找到第一个能满足大小的分区</td>
<td>空闲分区按地址递增的次序排列</td>
</tr>
<tr>
<td>最佳适应算法</td>
<td>优先使用更小的空闲区</td>
<td>空闲分区按容量递增的次序链接</td>
</tr>
<tr>
<td>最坏适应算法</td>
<td>优先使用最大的空闲区</td>
<td>空闲分区按容量递减的次序链接</td>
</tr>
<tr>
<td>邻近适应算法</td>
<td>从上次查找结束的位置开始检索</td>
<td>空闲分区按地址递增的次序排列（可排成循环链表）</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>非连续分配管理方式</th>
<th>思想</th>
<th>实现地址转换</th>
</tr>
</thead>
<tbody><tr>
<td>基本分页存储管理</td>
<td>把进程分页，各页面离散地放到各内存块中</td>
<td>计算逻辑地址对应页号<br>找到对应页面在内存中位置<br>计算逻辑地址对应页内偏移量<br>物理地址 = 页面地址 + 页面偏移量</td>
</tr>
<tr>
<td>基本分段存储管理</td>
<td>按程序自身逻辑划分为若干段</td>
<td>根据逻辑地址得到段号和段内地址<br>判断是否越界，越界中断<br>查询段表，找到段表项<br>检查段内地址是否超过断长，超过中断<br>计算物理地址 E = 段基址b + 段内地址W(偏移量)</td>
</tr>
<tr>
<td>段页式管理方式</td>
<td>分页：内存利用率高，无外部碎片，少量内部碎片<br>分页：便于实现信息共享和保护，会产生外部碎片<br>将进程按逻辑模块分段，再将各段分页<br>集合了两者优点</td>
<td>根据逻辑地址得到段号、页号、页内偏移量<br>判断段号是否越界，越界中断<br>查询段表，找到对应段表项<br>检查页号是否越界，越界中断<br>根据页表存放块号、页号查询页表，找到对应页表项<br>根据内存块号、业内偏移量得到物理地址</td>
</tr>
</tbody></table>
<p>页 是信息的物理单位 对用户不可见 进程地址空间是一维的  由于页面不是按逻辑模块划分，难以实现共享和保护<br>段 是信息的逻辑单位 对用户可见&emsp; 进程地址空间是二维的 分段更容易实现信息的共享和保护</p>
<hr>
<h3 id="内存空间的扩充"><a href="#内存空间的扩充" class="headerlink" title="内存空间的扩充"></a>内存空间的扩充</h3><p>解决程序大小超过物理内存总和的问题</p>
<table>
<thead>
<tr>
<th>内存扩充技术</th>
<th>思想、特征</th>
</tr>
</thead>
<tbody><tr>
<td>覆盖技术</td>
<td>将程序分为多个段，常用的段常驻内存，不常用的只在需要时调入。  <br>缺点：对用户不透明，增加了编程负担，已退出历史舞台~</td>
</tr>
<tr>
<td>交换技术</td>
<td>内存紧张时，将某些进程暂时换出内存，把外存中满足运行条件的进程换入。  <br>将磁盘分为文件区（离散分配）和对换区（连续分配）</td>
</tr>
<tr>
<td>虚拟存储技术</td>
<td>虚拟内存的实现建立在离散分配的内存管理方式之上<br>程序不需全部装入即可运行、运行时根据需要动态调入数据<br>传统存储管理方式特征、缺点：一次性 驻留性<br>虚拟内存特征：多次性、对换性、虚拟性</td>
</tr>
</tbody></table>
<p>虚拟内存实现：请求分页存储管理 请求分段存储管理 请求段页式存储管理</p>
<hr>
<h3 id="请求分页存储管理"><a href="#请求分页存储管理" class="headerlink" title="请求分页存储管理"></a>请求分页存储管理</h3><p>请求分页管理 与 基本分页管理的 主要区别：<br>访问信息不在内存时，由操作系统将所需信息从外存调入内存（请求调页）<br>内存空间不够时，由操作系统负责将内存中暂时用不到的信息换出到外存（页面置换）</p>
<p>页表机制：增加了几个表项<br><img src="/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/4.JPG" alt="1"></p>
<p>缺页中断机构：找到页表项检查是否在内存，若不在，产生缺页中断（内中断）<br>地址变换机构：找到页表项检查是否在内存，若不在，请求调页，若内存不足，还需换出页面并修改相应表项  </p>
<p>页面置换算法：</p>
<ol>
<li>最佳置换算法（OPT，Optimal）：淘汰最长时间不在被访问的页面 实际无法实现  </li>
<li>先进先出算法（FIFO）：淘汰最早进入内存的页面 Belady异常 算法性能差</li>
<li>最近最久未使用置换算法（LRU）：淘汰最近最久未使用的页面 性能好 实现困难开销大</li>
<li>时钟置换算法（CLOCK）/最近未用算法（NRU，Not Recently Used）：为页面设置访问位 最多经过两轮扫描 性能和开销均衡</li>
<li>改进型的时钟置换算法：只有被淘汰的页面被修改时，才需要写回外存 增加修改位 最多经过四轮扫描</li>
</ol>
<hr>
<h3 id="页面分配策略"><a href="#页面分配策略" class="headerlink" title="页面分配策略"></a>页面分配策略</h3><p>驻留集：请求分页存储管理中给进程分配的物理块的几何。在虚拟存储技术的系统中，驻留集大小一般小于进程总大小。<br>驻留集太小-&gt;缺页频繁，花大量时间处理缺页，用于进程时间少<br>驻留集太大-&gt;并发度下降，资源利用率低。</p>
<p>固定分配 / 可变分配&emsp;&emsp;&emsp;局部置换 / 全局置换  </p>
<table>
<thead>
<tr>
<th>页面分配策略</th>
<th>内容</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>固定分配局部置换</td>
<td>系统为进程分配一定数量物理块，整个运行期间不改变<br>发生缺页时只能从该进程在内存中的页面中选出一页换出</td>
<td>很难在刚开始就确定分配多少物理跨合理</td>
</tr>
<tr>
<td>可变分配全局置换</td>
<td>刚开始会为进程分配一定数量物理块,操作系统会保持一个空闲物理块队列。<br>发生缺页时，从空闲物理块中取出一块分配给进程<br>若无空闲物理块，可选择为锁定的页面换出外存，再将物理块分配给缺页进程。</td>
<td>只要发生缺页都将获得新的物理块<br>调出的页面可能是系统中任何进程的页，该进程缺页率会增加</td>
</tr>
<tr>
<td>可变分配局部置换</td>
<td>刚开始会为进程分配一定数量物理块<br>发生缺页时只允许从自己的物理块中换出</td>
<td>频繁缺页，系统会为该进程分配物理块，反之减少</td>
</tr>
</tbody></table>
<p>何时调入页面：</p>
<ol>
<li>预调页策略：主要用于进程的首次调入，由程序员指出先调入那些部分</li>
<li>请求调页策略：运行期间发现缺页时才将所缺页面调入内存</li>
</ol>
<p>抖动（颠簸）现象：频繁的页面调度，产生原因是频繁访问的页面数多于可用物理块（分配给进程的物理块不够）<br>工作集：某段时间间隔里，进程实际访问页面的集合</p>
<hr>
<h2 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h2><h3 id="文件的逻辑结构"><a href="#文件的逻辑结构" class="headerlink" title="文件的逻辑结构"></a>文件的逻辑结构</h3><p>无结构文件：文件内部的数据就是一系列二进制流或字符流组成 如.txt文件<br>有结构文件：由一组相似的记录组成，又称“记录式文件”，如数据库表文件，一般每条纪律有一个关键字。根据记录长度又可分为定长 / 可变长记录  </p>
<p>有结构文件的逻辑结构：</p>
<ol>
<li>顺序文件：文件中的记录顺序排列（逻辑上），记录可以是定长或可变长，各个记录在物理上可以顺序存储（可变长记录无法实现随机存取）或链式存储（无法实现随机存取）<br>串结构（记录顺序与关键字无关） 顺序结构（记录顺序按关键字排列）</li>
<li>索引文件：建立索引表（定长记录的顺序文件），每条记录对应索引项，文件中的记录在物理上可以离散存放。<br>主要用于对信息处理及时性要求高的场合</li>
<li>索引顺序文件：并不是每个记录对应一个索引表项，而是一组记录对应一个索引表项，减少了索引表项。<br>为进一步提高检索效率，可以建立多级索引表</li>
</ol>
<h3 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h3><p>文件控制块（FCB，File Control Block）：基本信息、存取控制信息、使用信息</p>
<p>单级目录结构 两级目录结构 树形目录结构 无环图目录结构</p>
<p>索引结点（FCB的改进）：除文件名之外的文件描述信息都放到索引结点，提升了文件检索速度</p>
<h3 id="文件的物理结构"><a href="#文件的物理结构" class="headerlink" title="文件的物理结构"></a>文件的物理结构</h3><table>
<thead>
<tr>
<th>文件分配方式</th>
<th>内容</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td>连续分配</td>
<td>每个文件在磁盘上占有一组连续的块</td>
<td>支持顺序访问和随机访问，顺序访问时速度最快</td>
<td>文件拓展不方便，存储空间利用率低，产生磁盘碎片</td>
</tr>
<tr>
<td>链接分配</td>
<td>为文件分配离散的磁盘块<br>隐式 / 显式链接</td>
<td>隐式：便于拓展，无碎片，外存利用率高<br>显式：便于拓展，无碎片，外存利用率高，且支持随机访问，文件访问率更高</td>
<td>隐式：只支持顺序访问，查找效率低，指向下一块的指针也会耗费存储空间<br>显式：文件分配表需占用存储空间</td>
</tr>
<tr>
<td>索引分配</td>
<td>文件离散分配在各个磁盘块中<br>系统为每个文件建立索引表<br>若文件太大，可采用链接方案、多层索引、混合索引</td>
<td>支持随机访问，易于扩展</td>
<td>索引表需占用一定空间，访问数据块前需先读入索引块</td>
</tr>
</tbody></table>
<h3 id="文件存储空间管理"><a href="#文件存储空间管理" class="headerlink" title="文件存储空间管理"></a>文件存储空间管理</h3><table>
<thead>
<tr>
<th>存储空间管理</th>
<th>分配</th>
<th>回收</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>空闲表法</td>
<td>与动态分区分配类似，为文件分配连续存储空间<br>同样可采用首次适应、最佳适应、最坏适应算法决定为文件分配区间</td>
<td>与动态分区分配类似，注意表项合并问题</td>
<td>适用于“连续分配方式”</td>
</tr>
<tr>
<td>空闲链表法（盘块链）</td>
<td>从链头开始一次摘下K个盘块分配，并修改空闲链的链头指针</td>
<td>回收的盘块依次挂到链尾，并修改空闲链的链尾指针</td>
<td>操作系统保存着链头、链尾指针<br>适用于离散分配，为文件分配多个盘块时要重复多次操作</td>
</tr>
<tr>
<td>空闲链表法（盘区链）</td>
<td>可采用首次适应、最佳适应的算法从链头开始检索<br>注意分配后修改相应链指针、盘区大小等数据</td>
<td>若回收区和某个空闲盘区相邻，需将会收取合并到空闲盘区中<br>若回收区没有和任何空闲区相邻，将回收区最为单独空闲盘区挂到链尾</td>
<td>操作系统保存着链头、链尾指针<br>离散分配、连续分配都适用，为文件分配多个盘块时效率更高</td>
</tr>
<tr>
<td>位视图法</td>
<td>顺序扫描位示图，找到K个相邻或不相邻的“0”<br>根据字号、位号算出对应盘块号，将相应盘块分给文件<br>将相应位设置为“1”</td>
<td>根据回收的盘块号计算出对应的字号、位号<br>将相应二进制位设置为“0”</td>
<td>连续分配、离散分配都适用</td>
</tr>
<tr>
<td>成组链接法</td>
<td></td>
<td></td>
<td>UNIX采用的策略，适合大型文件系统</td>
</tr>
</tbody></table>
<h3 id="文件基本操作"><a href="#文件基本操作" class="headerlink" title="文件基本操作"></a>文件基本操作</h3><p>创建(create)：1.在外存中找到文件所需空间 2.根据文件存放路径找到目录，创建目录项  </p>
<p>删除(delete)：1.根据文件存放路径和文件名找到目录项 2.回收文件占用的磁盘块 3.删除文件对应目录项  </p>
<p>打开(open)：1.根据文件存放路径和文件名找到目录项，并检查是否有权限 2.将目录项复制到内存中的“打开文件表”</p>
<p>关闭(close)：1.进程打开文件表相应表项删除 2.回收内存空间等资源 3.系统打开文件表的打开计数器count-1 若count为0删除对应表项</p>
<p>读(read)：根据读指针、读入数据量、内存位置 将文件数据从外存读入内存</p>
<p>写(write)：根据写指针、写出数据量、内存位置 将文件数据从内存写出外存  </p>
<p>文件共享</p>
<p>基于索引结点的共享方式（硬链接）：<br>&emsp;索引结点中设置一个链接计数变量count，表示链接到本索引结点上的用户目录项数<br>基于符号链的共享方式（软链接）：<br>&emsp;类似Windows的“快捷方式”，创建Link型文件，访问速度比硬链接慢  </p>
<p>文件保护  </p>
<p>口令保护 加密保护 访问控制</p>
<p>文件系统的层次结构：<br>例：请求删除文件”D:/工作目录/学生信息.xlsx”的最后100条记录  </p>
<ol>
<li>用户通过操作系统接口发出请求——用户接口</li>
<li>查找目录找到目录项——文件目录系统</li>
<li>检查是否有访问权限——存取控制模块</li>
<li>将记录号转为逻辑地址——逻辑文件系统与文件信息缓存区</li>
<li>转换为实际的物理地址——物理文件系统</li>
<li>对磁盘设备发出请求——设备管理程序模块</li>
<li>回收空闲盘块——辅助分配模块11</li>
</ol>
<p><img src="/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/5.JPG" alt="1"></p>
<h3 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h3><p>磁盘调度算法：<br>先来先服务（FCFS）最短寻找时间优先（SSTF）扫描算法（电梯算法、SCAN）循环扫描算法（C-SCAN）LOOK C-LOOK<br>减少延长时间的方法：交替编号 错位命名</p>
<h2 id="设备管理"><a href="#设备管理" class="headerlink" title="设备管理"></a>设备管理</h2><h3 id="I-O设备"><a href="#I-O设备" class="headerlink" title="I/O设备"></a>I/O设备</h3><p>按特性分类：人机交互类外部设备 存储设备 网络通信设备<br>按传输速率分类：低中高速度<br>按信息交换的单位分类：块设备（传输快、可寻址） 字符设备（传输慢、不可寻址，常用中断驱动方式）</p>
<p>I/O控制器：I/O设备的电子部件，用于实现对I/O设备的控制<br>功能：</p>
<ol>
<li>接收和识别CPU发出的命令（控制寄存器）</li>
<li>向CPU报告设备状态（状态寄存器）</li>
<li>数据交换（数据寄存器）</li>
<li>地址识别（由I/O逻辑实现  </li>
</ol>
<p>组成：</p>
<ol>
<li>CPU与控制器之间的接口</li>
<li>I/O逻辑</li>
<li>控制器与设备之间的接口</li>
</ol>
<h3 id="I-O控制方式"><a href="#I-O控制方式" class="headerlink" title="I/O控制方式"></a>I/O控制方式</h3><p><img src="/2020/03/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%B4%E7%90%86/6.JPG" alt="1"></p>
<h3 id="I-O软件层次"><a href="#I-O软件层次" class="headerlink" title="I/O软件层次"></a>I/O软件层次</h3><table>
<thead>
<tr>
<th>层次</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>用户层软件</td>
<td>与用户交互的接口，用户使用库函数操作设备，通过系统调用请求内核服务</td>
</tr>
<tr>
<td>设备独立性软件</td>
<td>1.向上层提供接口 2.实现对设备的保护 3.差错处理 4.设备分配与回收 5.数据缓冲区管理 6.建立逻辑设备名到物理设备名的映射关系<br>逻辑设备表（LUT）</td>
</tr>
<tr>
<td>设备驱动程序</td>
<td>负责对硬件设备的具体控制，设置设备寄存器，检查设备状态等</td>
</tr>
<tr>
<td>中断处理程序</td>
<td>进行中断处理</td>
</tr>
<tr>
<td>硬件</td>
<td>执行I/O操作</td>
</tr>
</tbody></table>
<h3 id="假脱机技术"><a href="#假脱机技术" class="headerlink" title="假脱机技术"></a>假脱机技术</h3><p>…待续</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/OS/" rel="tag"># OS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/02/28/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/" rel="next" title="银行家算法">
                <i class="fa fa-chevron-left"></i> 银行家算法
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/05/FlappyBird/" rel="prev" title="FlappyBird">
                FlappyBird <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/author.png"
                alt="郑子豪" />
            
              <p class="site-author-name" itemprop="name">郑子豪</p>
              <p class="site-description motion-element" itemprop="description">纸上得来终觉浅，<br />绝知此事要躬行。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#操作系统（Operating-System）概述"><span class="nav-number">1.</span> <span class="nav-text">操作系统（Operating System）概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#操作系统的功能和目标"><span class="nav-number">1.1.</span> <span class="nav-text">操作系统的功能和目标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作系统的特征"><span class="nav-number">1.2.</span> <span class="nav-text">操作系统的特征</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作系统的发展与分类"><span class="nav-number">1.3.</span> <span class="nav-text">操作系统的发展与分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作系统的运行机制和体系结构"><span class="nav-number">1.4.</span> <span class="nav-text">操作系统的运行机制和体系结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#中断和异常"><span class="nav-number">1.5.</span> <span class="nav-text">中断和异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统调用"><span class="nav-number">1.6.</span> <span class="nav-text">系统调用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程管理"><span class="nav-number">2.</span> <span class="nav-text">进程管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#进程"><span class="nav-number">2.1.</span> <span class="nav-text">进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#线程"><span class="nav-number">2.2.</span> <span class="nav-text">线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理机调度"><span class="nav-number">2.3.</span> <span class="nav-text">处理机调度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进程调度和调度算法"><span class="nav-number">2.4.</span> <span class="nav-text">进程调度和调度算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进程同步-互斥"><span class="nav-number">2.5.</span> <span class="nav-text">进程同步 &#x2F; 互斥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#死锁"><span class="nav-number">2.6.</span> <span class="nav-text">死锁</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内存管理"><span class="nav-number">3.</span> <span class="nav-text">内存管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概念"><span class="nav-number">3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内存空间的分配与回收"><span class="nav-number">3.2.</span> <span class="nav-text">内存空间的分配与回收</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内存空间的扩充"><span class="nav-number">3.3.</span> <span class="nav-text">内存空间的扩充</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#请求分页存储管理"><span class="nav-number">3.4.</span> <span class="nav-text">请求分页存储管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#页面分配策略"><span class="nav-number">3.5.</span> <span class="nav-text">页面分配策略</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件管理"><span class="nav-number">4.</span> <span class="nav-text">文件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文件的逻辑结构"><span class="nav-number">4.1.</span> <span class="nav-text">文件的逻辑结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件目录"><span class="nav-number">4.2.</span> <span class="nav-text">文件目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件的物理结构"><span class="nav-number">4.3.</span> <span class="nav-text">文件的物理结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件存储空间管理"><span class="nav-number">4.4.</span> <span class="nav-text">文件存储空间管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件基本操作"><span class="nav-number">4.5.</span> <span class="nav-text">文件基本操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#磁盘"><span class="nav-number">4.6.</span> <span class="nav-text">磁盘</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设备管理"><span class="nav-number">5.</span> <span class="nav-text">设备管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#I-O设备"><span class="nav-number">5.1.</span> <span class="nav-text">I&#x2F;O设备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#I-O控制方式"><span class="nav-number">5.2.</span> <span class="nav-text">I&#x2F;O控制方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#I-O软件层次"><span class="nav-number">5.3.</span> <span class="nav-text">I&#x2F;O软件层次</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#假脱机技术"><span class="nav-number">5.4.</span> <span class="nav-text">假脱机技术</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郑子豪</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
